-- liquibase formatted sql

-- changeset kanaoki:1747997411599-1
CREATE TABLE hotel (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, manager_id BIGINT, CONSTRAINT pk_hotel PRIMARY KEY (id));

-- changeset kanaoki:1747997411599-2
CREATE TABLE manager (id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, first_name VARCHAR(100) NOT NULL, last_name VARCHAR(100) NOT NULL, email VARCHAR(255) NOT NULL, password_hash VARCHAR(255) NOT NULL, phone VARCHAR(20), role VARCHAR(255) NOT NULL, hire_date TIMESTAMP WITHOUT TIME ZONE, is_active BOOLEAN, created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, updated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, CONSTRAINT pk_manager PRIMARY KEY (id));

-- changeset kanaoki:1747997411599-3
ALTER TABLE manager ADD CONSTRAINT UC_MANAGER_EMAIL UNIQUE (email);

-- changeset kanaoki:1747997411599-4
ALTER TABLE hotel ADD CONSTRAINT FK_HOTEL_ON_MANAGER FOREIGN KEY (manager_id) REFERENCES manager (id);

